{% extends 'movies/base.html' %}

{% block content %}
<div class="p-5 mb-5 text-white rounded bg-dark position-relative" style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80'); background-size: cover; background-position: center; min-height: 400px; display: flex; align-items: center;">
    <div class="col-md-8 px-0">
        <h1 class="display-3 fst-italic fw-bold">Bienvenue sur CinéExplorer</h1>
        <p class="lead my-3">Plongez dans notre base de données massive de <span class="fw-bold text-danger">{{ total_movies }}</span> films et découvrez les secrets du cinéma.</p>
        <p class="lead mb-0 mt-4">
            <a href="{% url 'movie_list' %}" class="btn btn-danger btn-lg fw-bold px-4 py-2">
                <i class="fas fa-play me-2"></i>Voir le catalogue
            </a>
        </p>
    </div>
</div>

<div class="row text-center mb-5">
    <div class="col-md-4">
        <div class="card text-white mb-3" style="background: linear-gradient(45deg, #e50914, #b20710); border: none;">
            <div class="card-body py-4">
                <i class="fas fa-film fa-2x mb-2 opacity-75"></i>
                <h2 class="card-title fw-bold display-5">{{ total_movies }}</h2>
                <p class="card-text text-uppercase small ls-1 fw-bold">Films référencés</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card text-white bg-dark mb-3" style="border: 1px solid #333;">
             <div class="card-body py-4">
                <i class="fas fa-users fa-2x mb-2 text-secondary"></i>
                <h2 class="card-title fw-bold display-5">{{ total_actors }}</h2>
                <p class="card-text text-uppercase small ls-1 text-muted">Acteurs</p>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card text-white bg-dark mb-3" style="border: 1px solid #333;">
             <div class="card-body py-4">
                <i class="fas fa-video fa-2x mb-2 text-secondary"></i>
                <h2 class="card-title fw-bold display-5">{{ total_directors }}</h2>
                <p class="card-text text-uppercase small ls-1 text-muted">Réalisateurs</p>
            </div>
        </div>
    </div>
</div>

<div class="d-flex align-items-center mb-4">
    <h2 class="mb-0"><i class="fas fa-star text-warning me-2"></i>Les mieux notés</h2>
    <div class="ms-auto">
        <a href="{% url 'movie_list' %}?sort=rating" class="text-muted small text-decoration-none hover-link">Voir tout ></a>
    </div>
</div>

<div class="row mb-5">
    {% for movie in top_movies %}
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 shadow-sm card-movie">
            <div class="card-body position-relative">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <span class="badge bg-warning text-dark fw-bold">
                        <i class="fas fa-star me-1"></i>{{ movie.rating }}
                    </span>
                    <small class="text-muted">{{ movie.year }}</small>
                </div>
                
                <h5 class="card-title mt-2">
                    <a href="{% url 'movie_detail' movie.movie_id %}" class="text-decoration-none stretched-link">
                        {{ movie.title }}
                    </a>
                </h5>
                <small class="text-muted">{{ movie.votes }} votes</small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="d-flex align-items-center mb-4">
    <h2 class="mb-0"><i class="fas fa-random text-danger me-2"></i>Suggestions du moment</h2>
</div>

<div class="row">
    {% for movie in suggestions %}
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 shadow-sm card-movie" style="border-left: 3px solid #e50914;">
            <div class="card-body">
                <h5 class="card-title text-truncate">
                    <a href="{% url 'movie_detail' movie.movie_id %}" class="text-decoration-none text-white">
                        {{ movie.title }}
                    </a>
                </h5>
                <div class="d-flex justify-content-between align-items-center mt-2">
                    <h6 class="text-muted mb-0">{{ movie.year }}</h6>
                    {% if movie.rating %}
                        <span class="badge bg-dark border border-secondary">{{ movie.rating }}</span>
                    {% else %}
                        <span class="badge bg-secondary">Non noté</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}